"use strict";(self["webpackChunkvue_library"]=self["webpackChunkvue_library"]||[]).push([[181],{8181:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"test-list maxWH clearfix"},[e("el-button",{staticStyle:{margin:"15px 0"},attrs:{type:"primary"},nativeOn:{click:function(e){e.preventDefault(),e.stopPropagation(),t.testAddDialog=!0}}},[t._v("添加实验")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.testlist,border:"","max-height":"250"}},[e("el-table-column",{attrs:{prop:"test_name",label:"实验名","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"user_name",label:"实验者"}}),e("el-table-column",{attrs:{prop:"test_status",label:"实验状态"}}),e("el-table-column",{attrs:{prop:"create_time",label:"创建时间","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{label:"操作","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"handler flex-center"},[e("el-button",{attrs:{type:"warning"},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.goPath("reserveinfo",s.$index)}}},[t._v(" 查看实验 ")]),e("el-button",{attrs:{type:"warning"},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.openDetailTest(s.$index,t.testlist)}}},[t._v(" 实验参数 ")])],1)]}}])})],1),e("el-pagination",{staticStyle:{padding:"10px 0"},attrs:{"current-page":t.page_no,"page-sizes":t.page_sizes,"page-size":t.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.test_count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),e("el-dialog",{attrs:{title:"添加实验",visible:t.testAddDialog},on:{"update:visible":function(e){t.testAddDialog=e}}},[e("el-form",{ref:"testAddForm",attrs:{model:t.testAddForm,"label-width":"80px",rules:t.rules}},[e("el-form-item",{attrs:{label:"实验名",prop:"account"}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"请输入实验名"},model:{value:t.testAddForm.account,callback:function(e){t.$set(t.testAddForm,"account","string"===typeof e?e.trim():e)},expression:"testAddForm.account"}})],1),e("el-form-item",{attrs:{label:"用户名",prop:"username"}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"请输入用户名"},model:{value:t.testAddForm.username,callback:function(e){t.$set(t.testAddForm,"username","string"===typeof e?e.trim():e)},expression:"testAddForm.username"}})],1),e("el-form-item",{attrs:{label:"实验状态",prop:"test_status"}},[e("el-radio-group",{model:{value:t.testAddForm.test_status,callback:function(e){t.$set(t.testAddForm,"test_status",e)},expression:"testAddForm.test_status"}},[e("el-radio",{attrs:{label:t.test_status[1].label}}),e("el-radio",{attrs:{label:t.test_status[2].label}})],1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer",align:"center"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.addTest("testAddForm")}}},[t._v("确 定")]),e("el-button",{nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.resetForm("testAddForm")}}},[t._v("重 置")])],1)],1),e("el-dialog",{attrs:{title:"修改实验信息",visible:t.testUpdateDialog},on:{"update:visible":function(e){t.testUpdateDialog=e}}},[e("el-form",{ref:"testUpdateForm",attrs:{model:t.testUpdateForm,"label-width":"80px",rules:t.rules,"hide-required-asterisk":""}},[e("el-form-item",{attrs:{label:"实验名",prop:"test_name"}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"请输入实验名"},model:{value:t.testUpdateForm.test_name,callback:function(e){t.$set(t.testUpdateForm,"test_name","string"===typeof e?e.trim():e)},expression:"testUpdateForm.test_name"}})],1),e("el-form-item",{attrs:{label:"实验者",prop:"user_name"}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"请输入实验者"},model:{value:t.testUpdateForm.user_name,callback:function(e){t.$set(t.testUpdateForm,"user_name","string"===typeof e?e.trim():e)},expression:"testUpdateForm.user_name"}})],1),e("el-form-item",{attrs:{label:"用户状态",prop:"test_status"}},[e("el-radio-group",{model:{value:t.testUpdateForm.test_status,callback:function(e){t.$set(t.testUpdateForm,"test_status",e)},expression:"testUpdateForm.test_status"}},[e("el-radio",{attrs:{label:t.test_status[1].label}}),e("el-radio",{attrs:{label:t.test_status[2].label}})],1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer",align:"center"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.updateTest("testUpdateForm")}}},[t._v("确 定")]),e("el-button",{nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.resetForm1("testUpdateForm")}}},[t._v("重 置")])],1)],1),e("el-dialog",{attrs:{title:"实验参数",visible:t.testDetailDialog},on:{"update:visible":function(e){t.testDetailDialog=e}}},[e("el-form",{ref:"testDetailForm",attrs:{model:t.testDetailForm,"label-width":"80px",rules:t.rules,"hide-required-asterisk":""}},[e("el-form-item",{attrs:{label:"seed",prop:"seed"}},[e("el-input",{attrs:{disabled:""},model:{value:t.testDetailForm.seed,callback:function(e){t.$set(t.testDetailForm,"seed","string"===typeof e?e.trim():e)},expression:"testDetailForm.seed"}})],1),e("el-form-item",{attrs:{label:"env_id",prop:"env_id"}},[e("el-input",{attrs:{disabled:""},model:{value:t.testDetailForm.env_id,callback:function(e){t.$set(t.testDetailForm,"env_id","string"===typeof e?e.trim():e)},expression:"testDetailForm.env_id"}})],1),e("el-form-item",{attrs:{label:"learning_rate",prop:"learning_rate"}},[e("el-input",{attrs:{disabled:""},model:{value:t.testDetailForm.learning_rate,callback:function(e){t.$set(t.testDetailForm,"learning_rate","string"===typeof e?e.trim():e)},expression:"testDetailForm.learning_rate"}})],1),e("el-form-item",{attrs:{label:"input_size",prop:"input_size"}},[e("el-input",{attrs:{disabled:""},model:{value:t.testDetailForm.input_size,callback:function(e){t.$set(t.testDetailForm,"input_size","string"===typeof e?e.trim():e)},expression:"testDetailForm.input_size"}})],1),e("el-form-item",{attrs:{label:"info",prop:"info"}},[e("el-input",{attrs:{disabled:""},model:{value:t.testDetailForm.info,callback:function(e){t.$set(t.testDetailForm,"info","string"===typeof e?e.trim():e)},expression:"testDetailForm.info"}})],1)],1)],1)],1)},r=[],i=(s(7658),s(54)),o=s(408),n={name:"TestList",data(){const t=(t,e,s)=>{const a=/^[\u4e00-\u9fa5]{1,7}$|^[\dA-Za-z_]{1,14}$/;e.trim().length<=0?s(new Error("请输入账号")):a.test(e.trim())?s():s(new Error("实验名不能超过7个汉字或者14个字符"))},e=(t,e,s)=>{e.trim().length<=0?s(new Error("请输入用户名")):s()},s=(t,e,s)=>{const a=/^[a-zA-Z0-9_]{8,12}$/;e.trim().length<=0?s(new Error("请输入密码")):a.test(e.trim())?s():s(new Error("密码由8到12位的字母、数字或下划线组成"))},a=(t,e,s)=>{""===this.userAddForm.password.trim()?s(new Error("请先输入密码")):e.trim().length<=0?s(new Error("确认密码不得为空")):e.trim()!==this.userAddForm.password?s(new Error("两次输入密码不一致")):s()},r=(t,e,s)=>{""===this.userUpdateForm.password.trim()?s(new Error("请先输入密码")):e.trim().length<=0?s(new Error("确认密码不得为空")):e.trim()!==this.userUpdateForm.password?s(new Error("两次输入密码不一致")):s()};return{rules:{account:[{required:!0,trigger:["blur","change"],validator:t}],username:[{required:!0,trigger:["blur","change"],validator:e}],password:[{required:!0,trigger:["blur","change"],validator:s}],adduserpwd1:[{required:!0,trigger:["blur","change"],validator:a}],updateuserpwd1:[{required:!0,trigger:["blur","change"],validator:r}],test_status:[{required:!0,message:"请选择用户状态",trigger:"change"}]},user_status:[{label:"全部",value:"0"},{label:i.st,value:"1"},{label:i.pv,value:"2"}],test_status:[{label:"全部",value:"0"},{label:i.sX,value:"1"},{label:i._h,value:"2"}],searchForm:{account:"",username:"",user_status:"",create_name:""},page_no:1,page_size:8,page_sizes:[8,16,30,50,100],testAddDialog:!1,userUpdateDialog:!1,testUpdateDialog:!1,testAddForm:{account:"",username:"",create_name:"",test_status:""},testDetailDialog:!1,testDetailForm:{seed:"",env_id:"",learning_rate:"",input_size:"",info:""},userUpdateForm:{user_id:0,account:"",username:"",update_pwd:!1,password:"",updateuserpwd1:"",user_status:i.st},testUpdateForm:{test_id:0,test_name:"",user_name:"",test_status:""}}},computed:{...(0,o.Se)(["user_id","userlist","testlist","user_count","test_count","userinfo"])},mounted(){this.searchForm.user_status=this.user_status[0].value,this.searchForm.create_name=this.userinfo.username,this.testAddForm.create_name=this.userinfo.username,this.getUserList(),this.getTestList()},methods:{resetForm(t){this.$refs[t].resetFields()},resetForm1(t){this.testUpdateForm.test_name="",this.testUpdateForm.user_name="",this.testUpdateForm.test_status=""},async addUser(t){await this.$refs[t].validate((async t=>{}))},async addTest(t){await this.$refs[t].validate((async e=>{if(e)try{await this.$store.dispatch("addTest",JSON.stringify(this.testAddForm)).then((e=>{this.resetForm(t),this.testAddDialog=!1,this.$message({type:"success",message:e}),this.getTestList()})).catch((t=>this.$message({type:"warning",message:t.message})))}catch(s){this.$message({type:"warning",message:s.message})}}))},openUpdateUser(t,e){this.userUpdateDialog=!0;const s=e[t];this.userUpdateForm={user_id:s.user_id,account:s.account,username:s.username,update_pwd:!1,password:"",updateuserpwd1:"",user_status:s.user_status}},openUpdateTest(t,e){this.testUpdateDialog=!0;const s=e[t];this.testUpdateForm={test_id:s.test_id,test_name:s.test_name,user_name:s.user_name,test_status:s.test_status}},openDetailTest(t,e){this.testDetailDialog=!0;const s=e[t];this.testDetailForm={test_id:s.test_id,test_name:s.test_name,user_name:s.user_name,test_status:s.test_status,seed:s.seed,env_id:s.env_id,learning_rate:s.learning_rate,input_size:s.input_size,info:s.info}},async updateUser(t){await this.$refs[t].validate((async e=>{if(e)try{const e={user_id:this.userUpdateForm.user_id,password:this.userUpdateForm.password,user_status:this.userUpdateForm.user_status};await this.$store.dispatch("backUpdateUserInfo",JSON.stringify(e)).then((e=>{this.resetForm(t),this.userUpdateDialog=!1,this.$message({type:"success",message:e}),this.getUserList()})).catch((t=>this.$message({type:"warning",message:t.message})))}catch(s){this.$message({type:"warning",message:s.message})}}))},async updateTest(t){try{const e={test_id:this.testUpdateForm.test_id,test_name:this.testUpdateForm.test_name,user_name:this.testUpdateForm.user_name,test_status:this.testUpdateForm.test_status};await this.$store.dispatch("updateTestInfo",JSON.stringify(e)).then((e=>{this.resetForm(t),this.testUpdateDialog=!1,this.$message({type:"success",message:e}),this.getTestList()})).catch((t=>this.$message({type:"warning",message:t.message})))}catch(e){this.$message({type:"warning",message:e.message})}},handleSizeChange(t){this.page_size=t,this.page_no=1,this.getUserList()},handleCurrentChange(t){this.page_no=t,this.getUserList()},async getUserList(){try{const{page_no:t,page_size:e}=this;let s=this.searchForm.account;const a=/^[0-9]{1,12}$/;a.test(s)||""!==s&&(s="1111111111111111111111111111111111111");let r=this.searchForm.username;const o=/^[\u4e00-\u9fa50-9a-zA-Z]{1,6}$/;o.test(r)||""!==r&&(r="1111111111111111111111111111111111111");let n=Number.parseInt(this.searchForm.user_status)||0;0===n?n="全部":1===n?n=i.st:2===n&&(n=i.pv),await this.$store.dispatch("getUserList",JSON.stringify({page_no:t,page_size:e,account:s,username:r,user_status:n}))}catch(t){this.$message({type:"warning",message:t.message})}},async getTestList(){try{console.log(this.searchForm);const{page_no:t,page_size:e}=this;let s=this.searchForm.account;const a=/^[0-9]{1,12}$/;a.test(s)||""!==s&&(s="1111111111111111111111111111111111111");let r=this.searchForm.username,o=this.searchForm.create_name;const n=/^[\u4e00-\u9fa50-9a-zA-Z]{1,6}$/;n.test(r)||""!==r&&(r="1111111111111111111111111111111111111");let l=Number.parseInt(this.searchForm.user_status)||0;0===l?l="全部":1===l?l=i.st:2===l&&(l=i.pv),await this.$store.dispatch("getTestList",JSON.stringify({page_no:t,page_size:e,account:s,username:r,user_status:l,create_name:o}))}catch(t){this.$message({type:"warning",message:t.message})}},resetSearchForm(t){this.resetForm(t),this.searchForm.user_status=this.user_status[0].value},search(){this.page_no=1,this.page_size=this.page_sizes[0],this.getTestList()},goPath(t,e){this.$router.push(t+"/"+e)},getFrontPath(t){let e=this.$route.path;return e.includes("front")?t:"front/"+t}}},l=n,u=s(1001),m=(0,u.Z)(l,a,r,!1,null,"9cede8a4",null),d=m.exports},54:function(t,e,s){s.d(e,{Bv:function(){return u},KM:function(){return l},Kb:function(){return n},QR:function(){return m},_h:function(){return o},pv:function(){return r},sX:function(){return i},st:function(){return a}});const a="正常",r="封禁",i="正常",o="封禁",n="管理员",l="用户",u="使用中",m="空闲中"}}]);
//# sourceMappingURL=181.a73d4370.js.map