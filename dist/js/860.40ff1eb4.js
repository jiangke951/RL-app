"use strict";(self["webpackChunkvue_library"]=self["webpackChunkvue_library"]||[]).push([[860],{6860:function(t,e,n){n.r(e),n.d(e,{default:function(){return E}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"feedback maxWH"},[t._m(0),e("main",{staticClass:"main"},[e("div",{ref:"result"}),t._m(1),e("el-form",{ref:"feedbackFrom",staticClass:"from",attrs:{model:t.feedbackFrom,"label-width":"80px","label-position":"top","hide-required-asterisk":""}},[e("el-form-item",{attrs:{label:"问题反馈",prop:"info"}},[e("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.feedbackFrom.info,callback:function(e){t.$set(t.feedbackFrom,"info",e)},expression:"feedbackFrom.info"}})],1),e("el-form-item",{attrs:{align:"center"}},[e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handlerSubmit.apply(null,arguments)}}},[t._v("提交")]),e("el-button",{nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.resetForm("feedbackFrom")}}},[t._v("重置")])],1)],1)],1)])},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header flex"},[e("span",{staticClass:"title"},[t._v("问题反馈")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"intro"},[e("p",{staticClass:"flex-center"},[t._v("在使用本系统中遇到了什么问题, 或者对于本系统有什么建议,")]),e("p",{staticClass:"flex-center"},[t._v("又或者有什么想对开发者说的话, 等等, 都可以在这里提出来")])])}],r=n(408);n(7658);
/*!
 * Shap.js v1.1.2
 * homepage: https://shap-admin.faas.elenet.me
 */
function s(t,e){if("undefined"===typeof document)return e;t=t||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");return i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),e}var a=function(){function t(t){this._config=t,this._key=t.key,this._plugins=[]}return t.filterBaaSKeywords=function(e){if(!e)return e;for(var n=0,i=t.baas;n<i.length;n++){var o=i[n];e[o]=void 0}return e},t.prototype.handleBaaSPayload=function(e){for(var n=this,i=n._plugins,o=n._key,r=Object.assign({},t.filterBaaSKeywords(e),{key:o}),s=0,a=i;s<a.length;s++){var c=a[s];Object.assign(r,c(r)||{})}return JSON.stringify(r)},t.prototype.mosaicRequestURL=function(t){var e=this._config.dev,n=void 0!==e&&e,i=n?"ssr.alpha.elenet.me/shap-api":"ssr.ele.me/shap-api";return"https://"+i+"/"+t},t.prototype.request=function(t,e,n){void 0===t&&(t="post"),void 0===n&&(n={});var i=this.mosaicRequestURL.bind(this,e),o=t.toLowerCase(),r="get"===o?i(void 0,n):i();return fetch(r,{headers:new Headers({"content-type":"application/json"}),method:o.toUpperCase(),body:"get"===o?null:this.handleBaaSPayload(n)}).then((function(t){return t.json()}))},t.prototype.plugin=function(t){this._plugins.push(t)},t.baas=["_id","createdAt","updatedAt"],t}();["patch","post","get","delete"].forEach((function(t){a.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.request.apply(this,[t].concat(e))}})),s('@import "//at.alicdn.com/t/font_474845_663hu195llsaif6r.css";.sp__container--suspension{overflow-x:hidden;position:fixed;right:20px;bottom:0;z-index:100;-webkit-box-shadow:0 2px 4px 0 rgba(0,0,0,.1);box-shadow:0 2px 4px 0 rgba(0,0,0,.1);font-size:12px}.sp__container--suspension .sp__header{padding:10px 25px;background:-webkit-gradient(linear,right top,left top,from(rgba(70,160,252,.5)),to(#46a0fc));background:linear-gradient(270deg,rgba(70,160,252,.5),#46a0fc);border-top-left-radius:4px;border-top-right-radius:4px;cursor:pointer;color:#fff}.sp__container--suspension .sp__header i{padding-right:3px;vertical-align:-2px}.sp__container--suspension.sp__container--full .sp__body{height:100px}.sp__container--suspension .sp__body{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:0;-webkit-transition:height .4s;transition:height .4s;-webkit-transition-timing-function:ease;transition-timing-function:ease;background:#fff;overflow:hidden}.sp__container--suspension .sp__body .sp__button{padding:8px 18px;border:1px solid #d8dce6;border-radius:4px;background:#fff;-webkit-transition:-webkit-transform .4s;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s;color:#5a5e66;font-size:16px;font-weight:400;cursor:pointer;outline:none}.sp__container--suspension .sp__body .sp__button i{font-size:15px}.sp__container--suspension .sp__body .sp__button:hover{border-color:#3a8ee6;-webkit-transform:translateY(-2px);transform:translateY(-2px);color:#3a8ee6;outline:none}.sp__container--suspension .sp__body .sp__button:first-of-type{margin-right:8px}.sp__container--suspension.sp__container--feedback .sp__feedback{opacity:1;z-index:1;-webkit-transform:translateX(0)!important;transform:translateX(0)!important}.sp__container--suspension .sp__feedback{position:absolute;opacity:0;z-index:-1;top:0;right:0;bottom:0;left:0;height:100px;line-height:100px;-webkit-transform:translateX(30%);transform:translateX(30%);-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;background:#fff;text-align:center;font-size:13px;cursor:default;color:#5e6d82}',void 0);var c=function(t){var e=this,n=function(t){return{class:{sp__button:!0},on:{click:e.sendDocFeedback.bind(e,t),mouseenter:function(){e.deviation=t?"-":""}}}},i=[t("header.sp__header",{on:{click:this.toggleFeedbackPanel}},[t("i.iconfont.icon-talk"),t("span",this.leadin)]),t("div.sp__body",[t("button",n(5),[t("i.iconfont.icon-smile")]),t("button",n(0),[t("i.iconfont.icon-sad")]),t("div.sp__feedback",{style:{transform:"translateX("+this.deviation+"30%)"}},this.feedback)])];return t("section.sp__container--suspension",{class:{"sp__container--feedback":this.voted,"sp__container--full":this.spreading}},i)},d=function(t,e){var n=t?t():e?window.location.hash:window.location.pathname;return{path:n,title:document.title}},p=document.querySelector.bind(document),f=Object.prototype.toString,l=function(t){return t instanceof HTMLElement?t:p(t)},u=function(t,e){void 0===e&&(e="");var n=f.call(t).slice(8,-1).toLowerCase();return Array.isArray(e)?e.map((function(t){return t.toLowerCase()})).includes(n):e.toLowerCase()===n},h=function(t){return JSON.parse(JSON.stringify(t))},m=function(){};function _(t){return null==t?[]:Array.isArray(t)?t:[t]}var b=function(t){return t instanceof RegExp?t.test(window.location.href.replace(window.location.origin,"")):u(t,"Function")?t():void 0},v=function(){function t(t,e,n){void 0===t&&(t="div"),void 0===e&&(e={}),void 0===n&&(n=[]),this.tag=t,this.props=e,this.children=n}return t}(),g=document.createElement.bind(document),y=document.createTextNode.bind(document);function k(t,e){var n=t.tag,i=t.props,o=t.children,r=i["class"],s=i.on,a=i.style,c=n.replace(/(^[^.]+)|(#.+)/g,"").slice(1).replace(/\./g," "),d=g(n.replace(/(\.|#).+/g,""));for(var p in c&&(d.className=c),r)r[p]&&d.classList.add(p);for(var f in a)d.style[f]=a[f];var l=function(t){d.addEventListener(t,(function(n){return s[t].call(e,n)}))};for(var u in s)l(u);return o.forEach((function(t){var n=t instanceof v?k(t,e):y(t);d.appendChild(n)})),d}function w(){return document.createComment("")}function x(t,e,n){var i=e.props["class"],o=t.props["class"];for(var r in i){var s=i[r];o[r]!==s&&n.classList[s?"add":"remove"](r)}}function C(t,e,n){return null==n&&u(e,["string","array"])?new v(t,void 0,_(e)):new v(t,e,_(n))}var F=function(){function t(e){var n=e.el,i=void 0===n?"":n,o=e.data,r=void 0===o?{}:o,s=e.methods,a=void 0===s?{}:s,c=e.render,d=e.created,p=void 0===d?m:d;for(var f in t._=h(r),this._data=r,this.$el=l(i),this._render=c,this.$options={created:p},a)this[f]=a[f].bind(this);this.observe(),this.render()}return t.prototype._render=function(t){},t.prototype.observe=function(){var t=this,e=this._data,n=function(n){Object.defineProperty(i,n,{get:function(){return e[n]},set:function(i){e[n]=i,t.patch()}})},i=this;for(var o in e)n(o)},t.prototype.patch=function(){var t=this._render(C);x(this._vnode,t,this.$el),this._vnode=t},t.prototype.render=function(){var e=this._render(C),n=e?k(e,this):w(),i=this.$el;if(document.body.replaceChild(n,i),this.$el=n,this._vnode=e,e){var o=h(t._);for(var r in o)this[r]=o[r];this.$options.created.call(this)}},t._={},t}(),S=function(t){var e=t.el,n=t.api,i=t.options,o=i.mode,r=i.formatter,s=i.hash,a=void 0!==s&&s,p=i.leadin,f=i.feedback,l=i.absence;return n.plugin(d.bind(null,r,a)),new F({el:e,data:{deviation:"",spreading:!1,voted:!1,previewScore:0,score:0,tooltip:{visible:!1,left:0},mode:o||"inline",leadin:p||"这个页面有帮助吗？",feedback:f||"感谢您的反馈！"},methods:{toggleFeedbackPanel:function(){this.spreading=!this.spreading},sendDocFeedback:function(t){var e=this;n.post("doc",{vote:t}).then((function(){e.voted=!0,setTimeout((function(){e.spreading=!1}),1e3)}),m)}},render:function(t){if(null==l||!b(l))return c.call(this,t)},created:function(){n.post("pv").then(m,m)}})},$=(function(){function t(t){this._options=t,this._key=t.key,this._dev=t.dev||!1,this.render()}t.prototype.render=function(){var t=this,e=t._key,n=t._dev,i=t._options,o=i.el,r=void 0===o?".shap-container":o,s=new a({key:e,dev:n});this._vm=S({el:r,api:s,options:i})},t.prototype.spa=function(){var t=this._vm;setTimeout(t.render.bind(t),4)}}(),{name:"Feedback",data(){return{feedbackFrom:{info:""}}},computed:{...(0,r.Se)(["userinfo"])},methods:{async getUserInfo(){try{await this.$store.dispatch("getUserInfo",{user_id:this.userinfo.user_id})}catch(t){console.warn(t.message)}},resetForm(t){this.$refs[t].resetFields()},async handlerSubmit(){const t=this.feedbackFrom.info,e=/^[\s\S]{5,100}$/;if(!(t.trim().length<1))return t.trim().length>0&&!e.test(t)?this.$message({type:"warning",message:"请将反馈内容控制在5到100给个字符之间"}):void await this.$confirm("确认提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{try{const e={account:this.userinfo.account,username:this.userinfo.username,feedback_info:t};await this.$store.dispatch("sendFeedback",JSON.stringify(e)).then((t=>{this.$notify({title:"提交成功",type:"success",message:t}),this.resetForm("feedbackFrom")})).catch((t=>this.$message({type:"warning",message:t.message})))}catch(e){console.warn(e.message)}})).catch((()=>{}))}}}),L=$,O=n(1001),T=(0,O.Z)(L,i,o,!1,null,"6648caaa",null),E=T.exports}}]);
//# sourceMappingURL=860.40ff1eb4.js.map