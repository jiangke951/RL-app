{"ast":null,"code":"import shap from 'shap';\nexport default {\n  name: 'shapPlot',\n  mounted() {\n    // 计算 shap 值\n    const explainer = shap.TreeExplainer(this.model);\n    const shapValues = explainer.shap_values(this.X);\n\n    // 选择要画力图的样本\n    const sampleIdx = 0;\n\n    // 生成 HTML 文件\n    const shapHtml = shap.force_plot_html(explainer.expected_value[1], shapValues[1][sampleIdx], this.X[sampleIdx], this.featureNames);\n    // 在组件中展示生成的 HTML 文件\n    this.$refs.shapPlot.innerHTML = shapHtml;\n  },\n  props: {\n    model: {\n      type: Object,\n      required: true\n    },\n    X: {\n      type: Array,\n      required: true\n    },\n    featureNames: {\n      type: Array,\n      required: true\n    }\n  }\n};","map":{"version":3,"names":["shap","name","mounted","explainer","TreeExplainer","model","shapValues","shap_values","X","sampleIdx","shapHtml","force_plot_html","expected_value","featureNames","$refs","shapPlot","innerHTML","props","type","Object","required","Array"],"sources":["src/views/Index/Front/Feedback/index.vue"],"sourcesContent":["<template>\r\n    \r\n    <div class=\"feedback maxWH\">\r\n        <!-- 头部 -->\r\n        <div class=\"header flex\">\r\n            <span class=\"title\">问题反馈</span>\r\n        </div>\r\n        <!-- 主体 -->\r\n        <main class=\"main\">\r\n            <div ref=\"shapPlot\"></div>           \r\n           \r\n        </main>\r\n    </div>\r\n    \r\n    \r\n    \r\n</template>\r\n  \r\n<script>\r\n import shap from 'shap'\r\n  \r\nexport default {\r\n    name: 'shapPlot',\r\n    mounted() {\r\n      // 计算 shap 值\r\n      const explainer = shap.TreeExplainer(this.model)\r\n      const shapValues = explainer.shap_values(this.X)\r\n  \r\n      // 选择要画力图的样本\r\n      const sampleIdx = 0\r\n  \r\n      // 生成 HTML 文件\r\n      const shapHtml = shap.force_plot_html(\r\n        explainer.expected_value[1],\r\n        shapValues[1][sampleIdx],\r\n        this.X[sampleIdx],\r\n        this.featureNames\r\n      )\r\n      // 在组件中展示生成的 HTML 文件\r\n    this.$refs.shapPlot.innerHTML = shapHtml\r\n  },\r\nprops: {\r\n    model: { type: Object, required: true },\r\n    X: { type: Array, required: true },\r\n    featureNames: { type: Array, required: true }\r\n  }\r\n}\r\n</script>"],"mappings":"AAmBA,OAAAA,IAAA;AAEA;EACAC,IAAA;EACAC,QAAA;IACA;IACA,MAAAC,SAAA,GAAAH,IAAA,CAAAI,aAAA,MAAAC,KAAA;IACA,MAAAC,UAAA,GAAAH,SAAA,CAAAI,WAAA,MAAAC,CAAA;;IAEA;IACA,MAAAC,SAAA;;IAEA;IACA,MAAAC,QAAA,GAAAV,IAAA,CAAAW,eAAA,CACAR,SAAA,CAAAS,cAAA,KACAN,UAAA,IAAAG,SAAA,GACA,KAAAD,CAAA,CAAAC,SAAA,GACA,KAAAI,YACA;IACA;IACA,KAAAC,KAAA,CAAAC,QAAA,CAAAC,SAAA,GAAAN,QAAA;EACA;EACAO,KAAA;IACAZ,KAAA;MAAAa,IAAA,EAAAC,MAAA;MAAAC,QAAA;IAAA;IACAZ,CAAA;MAAAU,IAAA,EAAAG,KAAA;MAAAD,QAAA;IAAA;IACAP,YAAA;MAAAK,IAAA,EAAAG,KAAA;MAAAD,QAAA;IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}