{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from 'vuex';\nexport default {\n  name: 'ReserveInfo',\n  data() {\n    return {\n      reserveInfo: {\n        title: '',\n        floor: '',\n        seat_no: '',\n        leave_tiem: ''\n      }\n    };\n  },\n  computed: {\n    ...mapGetters(['front_reserve_info', 'userinfo'])\n  },\n  mounted() {\n    // 显示预约信息\n    this.setReserveInfo();\n    // 获取用户信息\n    this.getUserInfo();\n  },\n  methods: {\n    // 路由判断\n    getFrontPath(path) {\n      let href = this.$route.path;\n      if (href.includes('front')) {\n        return path;\n      } else {\n        return 'front/' + path;\n      }\n    },\n    // 去哪个页面\n    goPath(path) {\n      this.$router.push(this.getFrontPath(path));\n    },\n    // 去预约座位页\n    goReserveSeat() {\n      this.$bus.$emit('switchCheckNav', '1-1');\n      this.goPath('reserveseat');\n    },\n    // 如果存在预约信息, 显示\n    setReserveInfo() {\n      if (Object.keys(this.front_reserve_info).length > 0) {\n        this.reserveInfo = {\n          title: `${this.userinfo.username}同学, 你于 ${this.front_reserve_info.begin_time.substring(11, 19)} 预约了座位`,\n          floor: `座位楼层: ${this.front_reserve_info.seat_floor}`,\n          seat_no: `座位编号: ${this.front_reserve_info.seat_no}`,\n          leave_tiem: `离座时间: ${this.front_reserve_info.end_time.substring(11, 19)}`\n        };\n      }\n    },\n    // 获取用户信息\n    async getUserInfo() {\n      try {\n        await this.$store.dispatch('getUserInfo', {\n          user_id: this.userinfo.user_id\n        });\n      } catch (e) {\n        console.warn(e.message);\n      }\n    },\n    // 离开座位\n    async leaveSeat() {\n      if (Object.keys(this.front_reserve_info).length > 0) {\n        await this.$confirm('确定离开座位?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(async () => {\n          try {\n            await this.$store.dispatch('frontLeaveSeat', {\n              user_id: this.userinfo.user_id,\n              seat_id: this.front_reserve_info.seat_id\n            }).then(async res => {\n              this.$notify({\n                title: '成功',\n                type: 'success',\n                message: res\n              });\n              await this.getUserInfo();\n            });\n          } catch (e) {\n            console.warn(e.message);\n          }\n        }).catch(() => {});\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","name","data","reserveInfo","title","floor","seat_no","leave_tiem","computed","mounted","setReserveInfo","getUserInfo","methods","getFrontPath","path","href","$route","includes","goPath","$router","push","goReserveSeat","$bus","$emit","Object","keys","front_reserve_info","length","userinfo","username","begin_time","substring","seat_floor","end_time","$store","dispatch","user_id","e","console","warn","message","leaveSeat","$confirm","confirmButtonText","cancelButtonText","type","then","seat_id","res","$notify","catch"],"sources":["src/views/Index/Front/ReserveInfo/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"reserve-info maxWH\">\r\n        <!-- 头部 -->\r\n        <div class=\"header flex\">\r\n            <span class=\"title\"></span>\r\n            <p class=\"info flex\"></p>\r\n        </div>\r\n        <!-- 主体 -->\r\n        <main class=\"main\">\r\n            <!-- 预约信息 -->\r\n            <el-row class=\"reserve-detail\" v-show=\"(Object.keys(front_reserve_info).length > 0)\">\r\n                <el-col class=\"reserve-detail-item\">{{ reserveInfo.title }}</el-col><br>\r\n                <el-divider></el-divider>\r\n                <el-col class=\"reserve-detail-item\">{{ reserveInfo.floor }}</el-col>\r\n                <el-col class=\"reserve-detail-item\">{{ reserveInfo.seat_no }}</el-col>\r\n                <el-col class=\"reserve-detail-item\">{{ reserveInfo.leave_tiem }}</el-col>\r\n                <div class=\"leave-seat flex-center\">\r\n                    <el-button type=\"info\" @click.native.prevent.stop=\"leaveSeat\">离开座位</el-button>\r\n                </div>\r\n            </el-row>\r\n            <!-- 没有预约信息时的显示 -->\r\n            <div class=\"no-more maxWH\" v-show=\"(Object.keys(front_reserve_info).length < 1)\">\r\n                <p class=\"info flex-center\">你现在还没有已经建立的实验</p>\r\n                <div class=\"btn\">\r\n                    <el-button type=\"primary\" @click.native.prevent.stop=\"goReserveSeat\">新建实验</el-button>\r\n                </div>\r\n            </div>\r\n        </main>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n    name: 'ReserveInfo',\r\n    data() {\r\n        return {\r\n            reserveInfo: {\r\n                title: '',\r\n                floor: '',\r\n                seat_no: '',\r\n                leave_tiem: ''\r\n            },\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters(['front_reserve_info', 'userinfo']),\r\n    },\r\n    mounted() {\r\n        // 显示预约信息\r\n        this.setReserveInfo()\r\n        // 获取用户信息\r\n        this.getUserInfo()\r\n    },\r\n    methods: {\r\n        // 路由判断\r\n        getFrontPath(path) {\r\n            let href = this.$route.path\r\n            if (href.includes('front')) {\r\n                return path\r\n            } else {\r\n                return 'front/' + path\r\n            }\r\n        },\r\n        // 去哪个页面\r\n        goPath(path) {\r\n            this.$router.push(this.getFrontPath(path))\r\n        },\r\n        // 去预约座位页\r\n        goReserveSeat() {\r\n            this.$bus.$emit('switchCheckNav', '1-1')\r\n            this.goPath('reserveseat')\r\n        },\r\n        // 如果存在预约信息, 显示\r\n        setReserveInfo() {\r\n            if (Object.keys(this.front_reserve_info).length > 0) {\r\n                this.reserveInfo = {\r\n                    title: `${this.userinfo.username}同学, 你于 ${this.front_reserve_info.begin_time.substring(11, 19)} 预约了座位`,\r\n                    floor: `座位楼层: ${this.front_reserve_info.seat_floor}`,\r\n                    seat_no: `座位编号: ${this.front_reserve_info.seat_no}`,\r\n                    leave_tiem: `离座时间: ${this.front_reserve_info.end_time.substring(11, 19)}`\r\n                }\r\n            }\r\n        },\r\n        // 获取用户信息\r\n        async getUserInfo() {\r\n            try {\r\n                await this.$store.dispatch('getUserInfo', { user_id: this.userinfo.user_id })\r\n            } catch (e) {\r\n                console.warn(e.message)\r\n            }\r\n        },\r\n        // 离开座位\r\n        async leaveSeat() {\r\n            if (Object.keys(this.front_reserve_info).length > 0) {\r\n                await this.$confirm('确定离开座位?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(async () => {\r\n                    try {\r\n                        await this.$store.dispatch('frontLeaveSeat', { user_id: this.userinfo.user_id, seat_id: this.front_reserve_info.seat_id })\r\n                            .then(async res => {\r\n                                this.$notify({ title: '成功', type: 'success', message: res })\r\n                                await this.getUserInfo()\r\n                            })\r\n                    } catch (e) {\r\n                        console.warn(e.message)\r\n                    }\r\n                }).catch(() => { })\r\n            }\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.header {\r\n    width: 100%;\r\n    height: 100px;\r\n    background-color: #324057;\r\n    box-sizing: border-box;\r\n    padding: 50px 20% 10px;\r\n    overflow: hidden;\r\n\r\n    .title {\r\n        font-size: 25px;\r\n        color: #fff;\r\n    }\r\n\r\n    .info {\r\n        margin-left: 50px;\r\n        flex-flow: column;\r\n        justify-content: center;\r\n        color: #fff;\r\n    }\r\n}\r\n\r\n.main {\r\n    width: 100%;\r\n    height: calc(100% - 100px);\r\n    box-sizing: border-box;\r\n    padding: 80px 30% 0;\r\n\r\n    .reserve-detail {\r\n        .reserve-detail-item {\r\n            font-size: 20px;\r\n        }\r\n\r\n        .leave-seat {\r\n            width: 100%;\r\n            padding-top: 30px;\r\n        }\r\n    }\r\n\r\n    .no-more {\r\n        .info {\r\n            width: 100%;\r\n            font-size: 25px;\r\n            color: rgb(160, 160, 160);\r\n            padding-bottom: 30px;\r\n        }\r\n\r\n        .btn {\r\n            width: 100%;\r\n            text-align: center;\r\n        }\r\n    }\r\n}\r\n</style>"],"mappings":";AAgCA,SAAAA,UAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;QACAC,KAAA;QACAC,KAAA;QACAC,OAAA;QACAC,UAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,GAAAR,UAAA;EACA;EACAS,QAAA;IACA;IACA,KAAAC,cAAA;IACA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACA;IACAC,aAAAC,IAAA;MACA,IAAAC,IAAA,QAAAC,MAAA,CAAAF,IAAA;MACA,IAAAC,IAAA,CAAAE,QAAA;QACA,OAAAH,IAAA;MACA;QACA,kBAAAA,IAAA;MACA;IACA;IACA;IACAI,OAAAJ,IAAA;MACA,KAAAK,OAAA,CAAAC,IAAA,MAAAP,YAAA,CAAAC,IAAA;IACA;IACA;IACAO,cAAA;MACA,KAAAC,IAAA,CAAAC,KAAA;MACA,KAAAL,MAAA;IACA;IACA;IACAR,eAAA;MACA,IAAAc,MAAA,CAAAC,IAAA,MAAAC,kBAAA,EAAAC,MAAA;QACA,KAAAxB,WAAA;UACAC,KAAA,UAAAwB,QAAA,CAAAC,QAAA,eAAAH,kBAAA,CAAAI,UAAA,CAAAC,SAAA;UACA1B,KAAA,gBAAAqB,kBAAA,CAAAM,UAAA;UACA1B,OAAA,gBAAAoB,kBAAA,CAAApB,OAAA;UACAC,UAAA,gBAAAmB,kBAAA,CAAAO,QAAA,CAAAF,SAAA;QACA;MACA;IACA;IACA;IACA,MAAApB,YAAA;MACA;QACA,WAAAuB,MAAA,CAAAC,QAAA;UAAAC,OAAA,OAAAR,QAAA,CAAAQ;QAAA;MACA,SAAAC,CAAA;QACAC,OAAA,CAAAC,IAAA,CAAAF,CAAA,CAAAG,OAAA;MACA;IACA;IACA;IACA,MAAAC,UAAA;MACA,IAAAjB,MAAA,CAAAC,IAAA,MAAAC,kBAAA,EAAAC,MAAA;QACA,WAAAe,QAAA;UACAC,iBAAA;UACAC,gBAAA;UACAC,IAAA;QACA,GAAAC,IAAA;UACA;YACA,WAAAZ,MAAA,CAAAC,QAAA;cAAAC,OAAA,OAAAR,QAAA,CAAAQ,OAAA;cAAAW,OAAA,OAAArB,kBAAA,CAAAqB;YAAA,GACAD,IAAA,OAAAE,GAAA;cACA,KAAAC,OAAA;gBAAA7C,KAAA;gBAAAyC,IAAA;gBAAAL,OAAA,EAAAQ;cAAA;cACA,WAAArC,WAAA;YACA;UACA,SAAA0B,CAAA;YACAC,OAAA,CAAAC,IAAA,CAAAF,CAAA,CAAAG,OAAA;UACA;QACA,GAAAU,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}