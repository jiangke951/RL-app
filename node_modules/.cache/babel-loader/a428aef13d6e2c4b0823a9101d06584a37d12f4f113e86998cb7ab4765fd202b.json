{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { user_identity_admin } from '@/config';\nimport { mapGetters } from 'vuex';\nexport default {\n  name: 'LeftMenu',\n  data() {\n    return {\n      // 身份为管理员\n      user_identity_admin: user_identity_admin,\n      // 管理员导航\n      backitems: [{\n        icon: 'el-icon-s-tools',\n        name: '用户管理',\n        path: 'user',\n        children: [\n        // { path: 'bmyinfo', name: '个人信息' },\n        {\n          path: 'userlist',\n          name: '用户列表'\n        }]\n      }, {\n        icon: 'el-icon-s-claim',\n        name: '实验管理',\n        path: 'reserve',\n        children: [{\n          path: 'reservelist',\n          name: '实验列表'\n        }]\n      },\n      // {\n      //     icon: 'el-icon-s-ticket',\n      //     name: '座位管理',\n      //     path: 'seat',\n      //     children: [\n      //         { path: 'seatlist', name: '座位列表' }\n      //     ]\n      // },\n      {\n        icon: 'el-icon-message-solid',\n        name: '通知管理',\n        path: 'notice',\n        children: [{\n          path: 'noticelist',\n          name: '通知列表'\n        }]\n      }],\n      // 用户导航\n      items: []\n    };\n  },\n  computed: {\n    ...mapGetters(['identity', 'userinfo'])\n  },\n  mounted() {\n    this.$bus.$on('changeBackMenuCheck', path => {\n      this.$refs.backLeftMenu.activeIndex = path;\n    });\n  },\n  beforeDestroy() {\n    this.$bus.$off('changeBackMenuCheck');\n  },\n  methods: {\n    // 获取用户信息\n    async getUserInfo() {\n      try {\n        await this.$store.dispatch('getUserInfo', {\n          user_id: this.userinfo.user_id\n        });\n      } catch (e) {\n        console.warn(e.message);\n      }\n    },\n    getBackPath(path) {\n      let href = this.$route.path;\n      if (href.includes('back')) {\n        return path;\n      } else {\n        return 'back/' + path;\n      }\n    },\n    async goHome() {\n      await this.getUserInfo();\n      this.$router.push('/');\n    }\n  }\n};","map":{"version":3,"names":["user_identity_admin","mapGetters","name","data","backitems","icon","path","children","items","computed","mounted","$bus","$on","$refs","backLeftMenu","activeIndex","beforeDestroy","$off","methods","getUserInfo","$store","dispatch","user_id","userinfo","e","console","warn","message","getBackPath","href","$route","includes","goHome","$router","push"],"sources":["src/components/LeftMenu/index.vue"],"sourcesContent":["<template>\r\n    <el-row class=\"left-menu\">\r\n        <el-col v-if=\"(identity === user_identity_admin)\">\r\n            <el-menu ref=\"backLeftMenu\" class=\"el-menu-vertical-demo\" background-color=\"#324057\" text-color=\"#fff\"\r\n                active-text-color=\"#409eff\" default-active=\"0\">\r\n                <el-menu-item index=\"0\" @click.native.prevent.stop=\"goHome\">\r\n                    <i class=\"fa el-icon-s-home\"></i>\r\n                    <span slot=\"title\">首页</span>\r\n                </el-menu-item>\r\n                <template v-for=\"bitem in backitems\">\r\n                    <el-submenu v-if=\"bitem.children\" :index=\"bitem.path\" :key=\"bitem.path\">\r\n                        <template slot=\"title\">\r\n                            <i :class=\"'fa ' + bitem.icon\"></i>\r\n                            <span slot=\"title\">{{ bitem.name }}</span>\r\n                        </template>\r\n                        <!-- <router-link> 默认会被渲染成一个a标签 ，通过'to'属性指定链接' -->\r\n                        <router-link v-for=\"(cbitem, cbindex) in bitem.children\" :to=\"getBackPath(cbitem.path)\"\r\n                            :key=\"cbindex\">\r\n                            <el-menu-item :index=\"cbitem.path\">\r\n                                <span slot=\"title\">{{ cbitem.name }}</span>\r\n                            </el-menu-item>\r\n                        </router-link>\r\n                    </el-submenu>\r\n                </template>\r\n            </el-menu>\r\n        </el-col>\r\n    </el-row>\r\n</template>\r\n\r\n<script>\r\nimport { user_identity_admin } from '@/config'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n    name: 'LeftMenu',\r\n    data() {\r\n        return {\r\n            // 身份为管理员\r\n            user_identity_admin: user_identity_admin,\r\n            // 管理员导航\r\n            backitems: [\r\n                {\r\n                    icon: 'el-icon-s-tools',\r\n                    name: '用户管理',\r\n                    path: 'user',\r\n                    children: [\r\n                        // { path: 'bmyinfo', name: '个人信息' },\r\n                        { path: 'userlist', name: '用户列表' }\r\n                    ],\r\n                },\r\n                {\r\n                    icon: 'el-icon-s-claim',\r\n                    name: '实验管理',\r\n                    path: 'reserve',\r\n                    children: [\r\n                        { path: 'reservelist', name: '实验列表' }\r\n                    ],\r\n                },\r\n                // {\r\n                //     icon: 'el-icon-s-ticket',\r\n                //     name: '座位管理',\r\n                //     path: 'seat',\r\n                //     children: [\r\n                //         { path: 'seatlist', name: '座位列表' }\r\n                //     ]\r\n                // },\r\n                {\r\n                    icon: 'el-icon-message-solid',\r\n                    name: '通知管理',\r\n                    path: 'notice',\r\n                    children: [\r\n                        { path: 'noticelist', name: '通知列表' }\r\n                    ]\r\n                },\r\n            ],\r\n            // 用户导航\r\n            items: []\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters(['identity', 'userinfo'])\r\n    },\r\n    mounted() {\r\n        this.$bus.$on('changeBackMenuCheck', (path) => {\r\n            this.$refs.backLeftMenu.activeIndex = path\r\n        })\r\n    },\r\n    beforeDestroy() {\r\n        this.$bus.$off('changeBackMenuCheck')\r\n    },\r\n    methods: {\r\n        // 获取用户信息\r\n        async getUserInfo() {\r\n            try {\r\n                await this.$store.dispatch('getUserInfo', { user_id: this.userinfo.user_id })\r\n            } catch (e) {\r\n                console.warn(e.message)\r\n            }\r\n        },\r\n        getBackPath(path) {\r\n            let href = this.$route.path\r\n            if (href.includes('back')) {\r\n                return path\r\n            } else {\r\n                return 'back/' + path\r\n            }\r\n        },\r\n        async goHome() {\r\n            await this.getUserInfo()\r\n            this.$router.push('/')\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.left-menu {\r\n    position: fixed;\r\n    left: 0;\r\n    top: 60px;\r\n    z-index: 1;\r\n    width: 180px;\r\n    height: calc(100% - 60px);\r\n    background-color: #324057;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n\r\n    .el-menu {\r\n        border: none;\r\n    }\r\n\r\n    .fa {\r\n        margin-right: 5px;\r\n    }\r\n\r\n    .el-menu-vertical-demo:not(.el-menu--collapse) {\r\n        width: 180px;\r\n        min-height: 400px;\r\n    }\r\n\r\n    .el-menu-vertical-demo {\r\n        width: 35px;\r\n    }\r\n\r\n    .el-submenu .el-menu-item {\r\n        min-width: 180px;\r\n    }\r\n}\r\n\r\n\r\n</style>"],"mappings":";AA8BA,SAAAA,mBAAA;AACA,SAAAC,UAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACA;MACAH,mBAAA,EAAAA,mBAAA;MACA;MACAI,SAAA,GACA;QACAC,IAAA;QACAH,IAAA;QACAI,IAAA;QACAC,QAAA;QACA;QACA;UAAAD,IAAA;UAAAJ,IAAA;QAAA;MAEA,GACA;QACAG,IAAA;QACAH,IAAA;QACAI,IAAA;QACAC,QAAA,GACA;UAAAD,IAAA;UAAAJ,IAAA;QAAA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACAG,IAAA;QACAH,IAAA;QACAI,IAAA;QACAC,QAAA,GACA;UAAAD,IAAA;UAAAJ,IAAA;QAAA;MAEA,EACA;MACA;MACAM,KAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAR,UAAA;EACA;EACAS,QAAA;IACA,KAAAC,IAAA,CAAAC,GAAA,wBAAAN,IAAA;MACA,KAAAO,KAAA,CAAAC,YAAA,CAAAC,WAAA,GAAAT,IAAA;IACA;EACA;EACAU,cAAA;IACA,KAAAL,IAAA,CAAAM,IAAA;EACA;EACAC,OAAA;IACA;IACA,MAAAC,YAAA;MACA;QACA,WAAAC,MAAA,CAAAC,QAAA;UAAAC,OAAA,OAAAC,QAAA,CAAAD;QAAA;MACA,SAAAE,CAAA;QACAC,OAAA,CAAAC,IAAA,CAAAF,CAAA,CAAAG,OAAA;MACA;IACA;IACAC,YAAAtB,IAAA;MACA,IAAAuB,IAAA,QAAAC,MAAA,CAAAxB,IAAA;MACA,IAAAuB,IAAA,CAAAE,QAAA;QACA,OAAAzB,IAAA;MACA;QACA,iBAAAA,IAAA;MACA;IACA;IACA,MAAA0B,OAAA;MACA,WAAAb,WAAA;MACA,KAAAc,OAAA,CAAAC,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}