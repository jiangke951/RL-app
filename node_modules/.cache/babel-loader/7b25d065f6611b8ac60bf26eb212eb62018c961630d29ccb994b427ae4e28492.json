{"ast":null,"code":"// 重写Storage的set和get方法，使得本地存储有时效\n\n// 有效期：1天\nexport const expire = 1000 * 60 * 60 * 24;\n\n/**\r\n * 将数据有期限的保存到本地\r\n * @params String {key} 键\r\n * @params String {value} 值\r\n * @params Number {expire} 有效期\r\n */\nexport const setExpire = Storage.prototype.setExpire = (key, value, expire) => {\n  let obj = {\n    data: value,\n    time: Date.now(),\n    expire\n  };\n  localStorage.setItem(key, JSON.stringify(obj));\n};\n\n/**\r\n * 获取本地数据, 如果过期或不存在, 则返回null\r\n * @params String {key} 键\r\n * @returns String {value} 值\r\n */\nexport const getExpire = Storage.prototype.getExpire = key => {\n  let val = localStorage.getItem(key);\n  if (!val) return val;\n  val = JSON.parse(val);\n  if (Date.now() - val.time > val.expire) {\n    localStorage.removeItem(key);\n    return null;\n  }\n  return val.data;\n};","map":{"version":3,"names":["expire","setExpire","Storage","prototype","key","value","obj","data","time","Date","now","localStorage","setItem","JSON","stringify","getExpire","val","getItem","parse","removeItem"],"sources":["/Users/jiangke/PycharmProjects/RL-app/src/utils/storage.js"],"sourcesContent":["// 重写Storage的set和get方法，使得本地存储有时效\r\n\r\n// 有效期：1天\r\nexport const expire = 1000 * 60 * 60 * 24\r\n\r\n/**\r\n * 将数据有期限的保存到本地\r\n * @params String {key} 键\r\n * @params String {value} 值\r\n * @params Number {expire} 有效期\r\n */\r\nexport const setExpire = Storage.prototype.setExpire = (key, value, expire) => {\r\n    let obj = {\r\n        data: value,\r\n        time: Date.now(),\r\n        expire\r\n    }\r\n    localStorage.setItem(key, JSON.stringify(obj))\r\n}\r\n\r\n/**\r\n * 获取本地数据, 如果过期或不存在, 则返回null\r\n * @params String {key} 键\r\n * @returns String {value} 值\r\n */\r\nexport const getExpire = Storage.prototype.getExpire = key => {\r\n    let val = localStorage.getItem(key)\r\n    if (!val) return val\r\n    val = JSON.parse(val)\r\n    if (Date.now() - val.time > val.expire) {\r\n        localStorage.removeItem(key)\r\n        return null\r\n    }\r\n    return val.data\r\n}"],"mappings":"AAAA;;AAEA;AACA,OAAO,MAAMA,MAAM,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,SAAS,GAAGC,OAAO,CAACC,SAAS,CAACF,SAAS,GAAG,CAACG,GAAG,EAAEC,KAAK,EAAEL,MAAM,KAAK;EAC3E,IAAIM,GAAG,GAAG;IACNC,IAAI,EAAEF,KAAK;IACXG,IAAI,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;IAChBV;EACJ,CAAC;EACDW,YAAY,CAACC,OAAO,CAACR,GAAG,EAAES,IAAI,CAACC,SAAS,CAACR,GAAG,CAAC,CAAC;AAClD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMS,SAAS,GAAGb,OAAO,CAACC,SAAS,CAACY,SAAS,GAAGX,GAAG,IAAI;EAC1D,IAAIY,GAAG,GAAGL,YAAY,CAACM,OAAO,CAACb,GAAG,CAAC;EACnC,IAAI,CAACY,GAAG,EAAE,OAAOA,GAAG;EACpBA,GAAG,GAAGH,IAAI,CAACK,KAAK,CAACF,GAAG,CAAC;EACrB,IAAIP,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGM,GAAG,CAACR,IAAI,GAAGQ,GAAG,CAAChB,MAAM,EAAE;IACpCW,YAAY,CAACQ,UAAU,CAACf,GAAG,CAAC;IAC5B,OAAO,IAAI;EACf;EACA,OAAOY,GAAG,CAACT,IAAI;AACnB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}