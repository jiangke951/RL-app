{"ast":null,"code":"import { mapGetters } from 'vuex';\nimport shap from 'shap';\nexport default {\n  name: 'Feedback',\n  mounted() {\n    // 计算 shap 值\n    const explainer = shap.TreeExplainer(this.model);\n    const shapValues = explainer.shap_values(this.X);\n\n    // 选择要画力图的样本\n    const sampleIdx = 0;\n\n    // 生成 HTML 文件\n    const shapHtml = shap.force_plot_html(explainer.expected_value[1], shapValues[1][sampleIdx], this.X[sampleIdx], this.featureNames);\n    // 在组件中展示生成的 HTML 文件\n    this.$refs.shapPlot.innerHTML = shapHtml;\n  },\n  props: {\n    model: {\n      type: Object,\n      required: true\n    },\n    X: {\n      type: Array,\n      required: true\n    },\n    featureNames: {\n      type: Array,\n      required: true\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","shap","name","mounted","explainer","TreeExplainer","model","shapValues","shap_values","X","sampleIdx","shapHtml","force_plot_html","expected_value","featureNames","$refs","shapPlot","innerHTML","props","type","Object","required","Array"],"sources":["src/views/Index/Front/Feedback/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"feedback maxWH\">\r\n        <!-- 头部 -->\r\n        <div class=\"header flex\">\r\n            <span class=\"title\">问题反馈</span>\r\n        </div>\r\n        <!-- 主体 -->\r\n        <main class=\"main\">\r\n            <div ref=\"shapPlot\"></div> \r\n            <!-- 介绍 -->\r\n            <!-- <div class=\"intro\">\r\n                <p class=\"flex-center\">在使用本系统中遇到了什么问题, 或者对于本系统有什么建议,</p>\r\n                <p class=\"flex-center\">又或者有什么想对开发者说的话, 等等, 都可以在这里提出来</p>\r\n            </div> -->\r\n            <!-- 表单 -->\r\n            <!-- <el-form class=\"from\" ref=\"feedbackFrom\" :model=\"feedbackFrom\" label-width=\"80px\" label-position=\"top\"\r\n                hide-required-asterisk>\r\n                <el-form-item label=\"问题反馈\" prop=\"info\">\r\n                    <el-input type=\"textarea\" v-model=\"feedbackFrom.info\" :rows=\"5\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item align=\"center\">\r\n                    <el-button type=\"primary\" @click.native.prevent.stop=\"handlerSubmit\">提交</el-button>\r\n                    <el-button @click.native.prevent.stop=\"resetForm('feedbackFrom')\">重置</el-button>\r\n                </el-form-item>\r\n            </el-form> -->\r\n        </main>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport shap from 'shap'\r\nexport default {\r\n    name: 'Feedback',\r\n    mounted() {\r\n      // 计算 shap 值\r\n      const explainer = shap.TreeExplainer(this.model)\r\n      const shapValues = explainer.shap_values(this.X)\r\n  \r\n      // 选择要画力图的样本\r\n      const sampleIdx = 0\r\n  \r\n      // 生成 HTML 文件\r\n      const shapHtml = shap.force_plot_html(\r\n        explainer.expected_value[1],\r\n        shapValues[1][sampleIdx],\r\n        this.X[sampleIdx],\r\n        this.featureNames\r\n      )\r\n      // 在组件中展示生成的 HTML 文件\r\n    this.$refs.shapPlot.innerHTML = shapHtml\r\n  },\r\n  props: {\r\n    model: { type: Object, required: true },\r\n    X: { type: Array, required: true },\r\n    featureNames: { type: Array, required: true }\r\n  }\r\n    \r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.header {\r\n    width: 100%;\r\n    height: 100px;\r\n    background-color: #324057;\r\n    box-sizing: border-box;\r\n    padding: 50px 20% 10px;\r\n    overflow: hidden;\r\n\r\n    .title {\r\n        font-size: 25px;\r\n        color: #fff;\r\n    }\r\n}\r\n\r\n.main {\r\n    width: 100%;\r\n    height: calc(100% - 100px);\r\n    box-sizing: border-box;\r\n    padding: 50px 20% 0;\r\n\r\n    .intro {\r\n        p {\r\n            font-size: 18px;\r\n        }\r\n    }\r\n\r\n    .from {\r\n        box-sizing: border-box;\r\n        padding: 50px 20% 0;\r\n    }\r\n}\r\n</style>"],"mappings":"AA8BA,SAAAA,UAAA;AACA,OAAAC,IAAA;AACA;EACAC,IAAA;EACAC,QAAA;IACA;IACA,MAAAC,SAAA,GAAAH,IAAA,CAAAI,aAAA,MAAAC,KAAA;IACA,MAAAC,UAAA,GAAAH,SAAA,CAAAI,WAAA,MAAAC,CAAA;;IAEA;IACA,MAAAC,SAAA;;IAEA;IACA,MAAAC,QAAA,GAAAV,IAAA,CAAAW,eAAA,CACAR,SAAA,CAAAS,cAAA,KACAN,UAAA,IAAAG,SAAA,GACA,KAAAD,CAAA,CAAAC,SAAA,GACA,KAAAI,YACA;IACA;IACA,KAAAC,KAAA,CAAAC,QAAA,CAAAC,SAAA,GAAAN,QAAA;EACA;EACAO,KAAA;IACAZ,KAAA;MAAAa,IAAA,EAAAC,MAAA;MAAAC,QAAA;IAAA;IACAZ,CAAA;MAAAU,IAAA,EAAAG,KAAA;MAAAD,QAAA;IAAA;IACAP,YAAA;MAAAK,IAAA,EAAAG,KAAA;MAAAD,QAAA;IAAA;EACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}