{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from 'vuex';\nimport { user_identity_admin, user_identity_user } from '@/config';\nexport default {\n  name: 'HeadNav',\n  data() {\n    return {\n      user_identity_admin: user_identity_admin,\n      user_identity_user: user_identity_user,\n      // 用户导航\n      frontitems: [{\n        icon: 'el-icon-s-tools',\n        name: '用户管理',\n        path: 'user',\n        children: [{\n          path: 'myinfo',\n          name: '个人信息'\n        }, {\n          path: 'userlist',\n          name: '用户列表'\n        }]\n      }, {\n        icon: 'el-icon-s-claim',\n        name: '实验管理',\n        path: 'reserve',\n        children: [{\n          path: 'reservelist',\n          name: '实验列表'\n        }]\n      },\n      // {\n      //     icon: 'el-icon-s-ticket',\n      //     name: '座位管理',\n      //     path: 'seat',\n      //     children: [\n      //         { path: 'seatlist', name: '座位列表' }\n      //     ]\n      // },\n      {\n        icon: 'el-icon-message-solid',\n        name: '通知管理',\n        path: 'notice',\n        children: [{\n          path: 'noticelist',\n          name: '通知列表'\n        }]\n      }]\n    };\n  },\n  computed: {\n    ...mapGetters(['userinfo', 'identity', 'readlist']),\n    getUsername() {\n      return this.userinfo.username;\n    }\n  },\n  mounted() {\n    this.$bus.$on('switchCheckNav', nav => {\n      this.$refs.frontHeadNav.activeIndex = nav;\n    });\n  },\n  beforeDestroy() {\n    this.$bus.$off('switchCheckNav');\n  },\n  methods: {\n    // 退出登录\n    logout() {\n      this.$store.dispatch('userLogout').then(res => {\n        //eslint-disable-line no-unused-vars\n        this.$router.push('login');\n        // 导航到不同的URL,使用router.push方法，该方法会向history栈添加一个新的记录，所以当用户点击浏览器后退按钮时，则回到之前的URL\n      });\n    },\n\n    // 路由判断\n    getFrontPath(path) {\n      let href = this.$route.path;\n      if (href.includes('front')) {\n        return path;\n      } else {\n        return 'front/' + path;\n      }\n    },\n    // 去哪个页面\n    goPath(path) {\n      this.$router.push(this.getFrontPath(path));\n    },\n    // 去个人信息页\n    goUserPath(path) {\n      this.$refs.frontHeadNav.activeIndex = null;\n      this.goPath(path);\n    },\n    // 去预约查看页\n    goReserveInfo(path) {\n      this.$refs.frontHeadNav.activeIndex = '1-2';\n      this.goPath(path);\n    },\n    // 后台管理路由判断\n    goBackPath(path) {\n      let href = this.$route.path;\n      if (href.includes('back')) {\n        return path;\n      } else {\n        return 'back/' + path;\n      }\n    },\n    // 去后台个人信息页\n    goBackMyInfo(path) {\n      this.$bus.$emit('changeBackMenuCheck', 'bmyinfo');\n      this.$router.push(this.goBackPath(path));\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","user_identity_admin","user_identity_user","name","data","frontitems","icon","path","children","computed","getUsername","userinfo","username","mounted","$bus","$on","nav","$refs","frontHeadNav","activeIndex","beforeDestroy","$off","methods","logout","$store","dispatch","then","res","$router","push","getFrontPath","href","$route","includes","goPath","goUserPath","goReserveInfo","goBackPath","goBackMyInfo","$emit"],"sources":["src/components/HeadNav/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"HeadNav\">\r\n        <div class=\"head-nav fixed\" v-if=\"(identity === user_identity_admin)\">\r\n            <el-row class=\"flex\">\r\n                <el-col :span=\"12\" class=\"logo-container flex\">\r\n                    <img src=\"../../assets/logo.png\" alt=\"logo\" class=\"logo\">\r\n                    <span class=\"title\">算法实验展示系统</span>\r\n                </el-col>\r\n                <el-col :span=\"12\" class=\"user flex\">\r\n                    <div class=\"userinfo flex-center\">\r\n                        <img src=\"../../assets/avatar.gif\" alt=\"avatar\" class=\"avatar\">\r\n                        <!-- 下拉菜单 -->\r\n                        <span class=\"drop-down-list\">\r\n                            <el-dropdown>\r\n                                <span class=\"el-dropdown-link\" style=\"color: #fff;\">\r\n                                    <span class=\"username text-ellipsis\">{{ getUsername }}</span>\r\n                                    <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n                                </span>\r\n                                <el-dropdown-menu slot=\"dropdown\">\r\n                                    <el-dropdown-item\r\n                                        @click.native.prevent.stop=\"goBackMyInfo('bmyinfo')\">个人信息</el-dropdown-item>\r\n                                    <el-dropdown-item @click.native.prevent.stop=\"logout\">退出</el-dropdown-item>\r\n                                </el-dropdown-menu>\r\n                            </el-dropdown>\r\n                        </span>\r\n                    </div>\r\n                </el-col>\r\n            </el-row>\r\n        </div>\r\n        <div class=\"head-nav-f fixed\" v-if=\"(identity === user_identity_user)\">\r\n            <el-row class=\"flex head-front\">\r\n                <el-col :span=\"6\" class=\"logo-container flex\">\r\n                    <img src=\"../../assets/logo.png\" alt=\"logo\" class=\"logo\">\r\n                    <span class=\"title\">算法实验展示系统</span>\r\n                </el-col>\r\n                <el-col :span=\"12\" class=\"nav-fun\">\r\n                    <el-menu ref=\"frontHeadNav\" default-active=\"0\" class=\"el-menu-demo\" mode=\"horizontal\"\r\n                        background-color=\"#324057\" text-color=\"#fff\" active-text-color=\"#409eff\">\r\n                        <el-menu-item index=\"0\" @click.native.prevent.stop=\"$router.push('/')\">\r\n                            首页\r\n                        </el-menu-item>\r\n                        <el-submenu index=\"1\">\r\n                            <template slot=\"title\">新建实验</template>\r\n                            <el-menu-item index=\"1-1\"\r\n                                @click.native.prevent.stop=\"goPath('addtest')\">新建实验</el-menu-item>\r\n                            <el-menu-item index=\"1-2\"\r\n                                @click.native.prevent.stop=\"goPath('reserveinfo')\">实验展示</el-menu-item>\r\n                        </el-submenu>\r\n                        <el-menu-item index=\"3\" @click.native.prevent.stop=\"goPath('feedback')\">问题反馈</el-menu-item>\r\n                        <el-menu-item index=\"4\" style=\"position: relative;\"\r\n                            @click.native.prevent.stop=\"goPath('notice')\">\r\n                            <i v-if=\"(readlist.length > 0)\" class=\"el-icon-warning\"\r\n                                style=\"position: absolute;left: 90%;top: 30%;transform: translate(-90%,-30%);color: tomato;\"></i>\r\n                            <span slot=\"title\">消息通知</span>\r\n                        </el-menu-item>\r\n                    </el-menu>\r\n                </el-col>\r\n                <el-col :span=\"6\" class=\"user flex\">\r\n                    <div class=\"userinfo flex-center\">\r\n                        <img src=\"../../assets/avatar.gif\" alt=\"avatar\" class=\"avatar\">\r\n                        <!-- 下拉菜单 -->\r\n                        <span class=\"drop-down-list\">\r\n                            <el-dropdown>\r\n                                <span class=\"el-dropdown-link\" style=\"color: #fff;\">\r\n                                    <span class=\"username text-ellipsis\">{{ getUsername }}</span>\r\n                                    <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n                                </span>\r\n                                <el-dropdown-menu slot=\"dropdown\">\r\n                                    <el-dropdown-item\r\n                                        @click.native.prevent.stop=\"goUserPath('fmyinfo')\">个人信息</el-dropdown-item>\r\n                                    <el-dropdown-item\r\n                                        @click.native.prevent.stop=\"goReserveInfo('reserveinfo')\">查看实验</el-dropdown-item>\r\n                                    <el-dropdown-item @click.native.prevent.stop=\"logout\">退出</el-dropdown-item>\r\n                                </el-dropdown-menu>\r\n                            </el-dropdown>\r\n                        </span>\r\n                    </div>\r\n                </el-col>\r\n            </el-row>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport { user_identity_admin, user_identity_user } from '@/config'\r\nexport default {\r\n    name: 'HeadNav',\r\n    data() {\r\n        return {\r\n            user_identity_admin: user_identity_admin,\r\n            user_identity_user: user_identity_user,\r\n            // 用户导航\r\n            frontitems: [\r\n                {\r\n                    icon: 'el-icon-s-tools',\r\n                    name: '用户管理',\r\n                    path: 'user',\r\n                    children: [\r\n                        { path: 'myinfo', name: '个人信息' },\r\n                        { path: 'userlist', name: '用户列表' }\r\n                    ],\r\n                },\r\n                {\r\n                    icon: 'el-icon-s-claim',\r\n                    name: '实验管理',\r\n                    path: 'reserve',\r\n                    children: [\r\n                        { path: 'reservelist', name: '实验列表' }\r\n                    ],\r\n                },\r\n                // {\r\n                //     icon: 'el-icon-s-ticket',\r\n                //     name: '座位管理',\r\n                //     path: 'seat',\r\n                //     children: [\r\n                //         { path: 'seatlist', name: '座位列表' }\r\n                //     ]\r\n                // },\r\n                {\r\n                    icon: 'el-icon-message-solid',\r\n                    name: '通知管理',\r\n                    path: 'notice',\r\n                    children: [\r\n                        { path: 'noticelist', name: '通知列表' }\r\n                    ]\r\n                },\r\n            ],\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters(['userinfo', 'identity', 'readlist']),\r\n        getUsername() {\r\n            return this.userinfo.username\r\n        },\r\n    },\r\n    mounted() {\r\n        this.$bus.$on('switchCheckNav', (nav) => {\r\n            this.$refs.frontHeadNav.activeIndex = nav\r\n        })\r\n    },\r\n    beforeDestroy() {\r\n        this.$bus.$off('switchCheckNav')\r\n    },\r\n    methods: {\r\n        // 退出登录\r\n        logout() {\r\n            this.$store.dispatch('userLogout')\r\n\r\n                .then(res => {//eslint-disable-line no-unused-vars\r\n                    this.$router.push('login')\r\n                    // 导航到不同的URL,使用router.push方法，该方法会向history栈添加一个新的记录，所以当用户点击浏览器后退按钮时，则回到之前的URL\r\n                })\r\n        },\r\n        // 路由判断\r\n        getFrontPath(path) {\r\n            let href = this.$route.path\r\n            if (href.includes('front')) {\r\n                return path\r\n            } else {\r\n                return 'front/' + path\r\n            }\r\n        },\r\n        // 去哪个页面\r\n        goPath(path) {\r\n            this.$router.push(this.getFrontPath(path))\r\n        },\r\n        // 去个人信息页\r\n        goUserPath(path) {\r\n            this.$refs.frontHeadNav.activeIndex = null\r\n            this.goPath(path)\r\n        },\r\n        // 去预约查看页\r\n        goReserveInfo(path) {\r\n            this.$refs.frontHeadNav.activeIndex = '1-2'\r\n            this.goPath(path)\r\n        },\r\n        // 后台管理路由判断\r\n        goBackPath(path) {\r\n            let href = this.$route.path\r\n            if (href.includes('back')) {\r\n                return path\r\n            } else {\r\n                return 'back/' + path\r\n            }\r\n        },\r\n        // 去后台个人信息页\r\n        goBackMyInfo(path) {\r\n            this.$bus.$emit('changeBackMenuCheck', 'bmyinfo')\r\n            this.$router.push(this.goBackPath(path))\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.HeadNav {\r\n    width: 100%;\r\n}\r\n\r\n.head-nav {\r\n    z-index: 1;\r\n    width: 100%;\r\n    height: 60px;\r\n    min-width: 600px;\r\n    box-sizing: border-box;\r\n    padding: 5px 10px;\r\n    background: #324057;\r\n    color: #fff;\r\n    border-bottom: 1px solid #1f2d3d;\r\n    overflow: hidden;\r\n\r\n    .logo-container {\r\n        min-width: 400px;\r\n        height: 49px;\r\n        align-items: center;\r\n\r\n        .logo {\r\n            width: 49px;\r\n            height: 49px;\r\n        }\r\n\r\n        .title {\r\n            font-size: 22px;\r\n            letter-spacing: 3px;\r\n        }\r\n    }\r\n\r\n    .user {\r\n        height: 49px;\r\n        justify-content: flex-end;\r\n\r\n        .userinfo {\r\n            margin-right: 30px;\r\n\r\n            .avatar {\r\n                width: 39px;\r\n                height: 39px;\r\n                margin-right: 10px;\r\n                border-radius: 10px;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.head-nav-f {\r\n    z-index: 1;\r\n    width: 100%;\r\n    height: 60px;\r\n    min-width: 600px;\r\n    box-sizing: border-box;\r\n    padding: 5px 10px;\r\n    background: #324057;\r\n    color: #fff;\r\n    // border-bottom: 1px solid #1f2d3d;\r\n    overflow: hidden;\r\n\r\n    \r\n\r\n    .head-front {\r\n        margin: 0 auto;\r\n        width: 1226px;\r\n        height: 60px;\r\n\r\n\r\n        .logo-container {\r\n            min-width: 400px;\r\n            height: 49px;\r\n            align-items: center;\r\n\r\n            .logo {\r\n                width: 49px;\r\n                height: 49px;\r\n            }\r\n\r\n            .title {\r\n                font-size: 22px;\r\n                letter-spacing: 3px;\r\n            }\r\n        }\r\n\r\n        .nav-fun {\r\n            min-width: 600px;\r\n            height: 49px;\r\n        }\r\n\r\n        .user {\r\n            height: 49px;\r\n            justify-content: flex-end;\r\n\r\n            .userinfo {\r\n                margin-right: 30px;\r\n\r\n                .avatar {\r\n                    width: 39px;\r\n                    height: 39px;\r\n                    margin-right: 10px;\r\n                    border-radius: 10px;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    @media screen and (min-width: 1820px) {\r\n        .head-front{\r\n            width: 7rem;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n// .el-dropdown-menu{\r\n//         background-color: #324057 !important;\r\n//         border: none !important;\r\n//         margin-top: 25px !important;\r\n//     }\r\n//     .el-dropdown-menu__item{\r\n//         color:#fff !important;\r\n//     }\r\n//     .el-dropdown-menu__item:hover{\r\n//         color:#fff !important;\r\n//         background-color: #1f2d3d !important;\r\n//     }\r\n//     .el-popper /deep/ .popper__arrow{\r\n//         visibility: hidden !important;\r\n//     }\r\n</style>"],"mappings":";AAoFA,SAAAA,UAAA;AACA,SAAAC,mBAAA,EAAAC,kBAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAH,mBAAA,EAAAA,mBAAA;MACAC,kBAAA,EAAAA,kBAAA;MACA;MACAG,UAAA,GACA;QACAC,IAAA;QACAH,IAAA;QACAI,IAAA;QACAC,QAAA,GACA;UAAAD,IAAA;UAAAJ,IAAA;QAAA,GACA;UAAAI,IAAA;UAAAJ,IAAA;QAAA;MAEA,GACA;QACAG,IAAA;QACAH,IAAA;QACAI,IAAA;QACAC,QAAA,GACA;UAAAD,IAAA;UAAAJ,IAAA;QAAA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACAG,IAAA;QACAH,IAAA;QACAI,IAAA;QACAC,QAAA,GACA;UAAAD,IAAA;UAAAJ,IAAA;QAAA;MAEA;IAEA;EACA;EACAM,QAAA;IACA,GAAAT,UAAA;IACAU,YAAA;MACA,YAAAC,QAAA,CAAAC,QAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA,CAAAC,GAAA,mBAAAC,GAAA;MACA,KAAAC,KAAA,CAAAC,YAAA,CAAAC,WAAA,GAAAH,GAAA;IACA;EACA;EACAI,cAAA;IACA,KAAAN,IAAA,CAAAO,IAAA;EACA;EACAC,OAAA;IACA;IACAC,OAAA;MACA,KAAAC,MAAA,CAAAC,QAAA,eAEAC,IAAA,CAAAC,GAAA;QAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;QACA;MACA;IACA;;IACA;IACAC,aAAAvB,IAAA;MACA,IAAAwB,IAAA,QAAAC,MAAA,CAAAzB,IAAA;MACA,IAAAwB,IAAA,CAAAE,QAAA;QACA,OAAA1B,IAAA;MACA;QACA,kBAAAA,IAAA;MACA;IACA;IACA;IACA2B,OAAA3B,IAAA;MACA,KAAAqB,OAAA,CAAAC,IAAA,MAAAC,YAAA,CAAAvB,IAAA;IACA;IACA;IACA4B,WAAA5B,IAAA;MACA,KAAAU,KAAA,CAAAC,YAAA,CAAAC,WAAA;MACA,KAAAe,MAAA,CAAA3B,IAAA;IACA;IACA;IACA6B,cAAA7B,IAAA;MACA,KAAAU,KAAA,CAAAC,YAAA,CAAAC,WAAA;MACA,KAAAe,MAAA,CAAA3B,IAAA;IACA;IACA;IACA8B,WAAA9B,IAAA;MACA,IAAAwB,IAAA,QAAAC,MAAA,CAAAzB,IAAA;MACA,IAAAwB,IAAA,CAAAE,QAAA;QACA,OAAA1B,IAAA;MACA;QACA,iBAAAA,IAAA;MACA;IACA;IACA;IACA+B,aAAA/B,IAAA;MACA,KAAAO,IAAA,CAAAyB,KAAA;MACA,KAAAX,OAAA,CAAAC,IAAA,MAAAQ,UAAA,CAAA9B,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}